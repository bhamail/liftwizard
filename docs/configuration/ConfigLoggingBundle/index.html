<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> 
<title>Liftwizard: ConfigLoggingBundle</title>
<link rel="stylesheet" type="text/css" href="/docs/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/docs/static/main.css">
<link rel="stylesheet" type="text/css" href="/docs/static/css/global-overrides.css">
<link rel="stylesheet" type="text/css" href="/docs/static/css/global-overrides.css">
<link rel="stylesheet" type="text/css" href="/docs/static/css/global-overrides.css">
</head>
<link rel="shortcut icon" href="/docs/favicon.png"type="image/ico"/>
<body class="theme-znai-dark">
<script>(function() {
    var themeNameKey = 'znaiTheme';
    var darkThemeName = 'znai-dark';
    var lightThemeName = 'default';

    var znaiTheme = {
        changeHandlers: [],
        addChangeHandler(handler) {
            this.changeHandlers.push(handler);
        },
        removeChangeHandler(handler) {
            var idx = this.changeHandlers.indexOf(handler);
            this.changeHandlers.splice(idx, 1);
        },
        set(name) {
            this.name = name;
            document.body.className = 'theme-' + name;

            var idx = 0;
            var len = this.changeHandlers.length;
            for (; idx < len; idx++) {
                this.changeHandlers[idx](name);
            }
        },
        setExplicitly(name) {
            storeThemeName(name);
            this.set(name);
        },
        setExplicitlyIfNotSetAlready(name) {
            const themeName = getStoredThemeName();
            if (themeName) {
                return
            }

            this.setExplicitly(name)
        },
        toggle() {
            this.setExplicitly(this.name === lightThemeName ? darkThemeName : lightThemeName)
        }
    };

    var mediaThemeName = setLightMatchMediaListenerAndGetThemeName()
    var themeName = getStoredThemeName() || mediaThemeName;
    znaiTheme.set(themeName);

    window.znaiTheme = znaiTheme;

    function getStoredThemeName() {
        return localStorage.getItem(themeNameKey);
    }

    function storeThemeName(name) {
        return localStorage.setItem(themeNameKey, name);
    }

    function setLightMatchMediaListenerAndGetThemeName() {
        if (!window.matchMedia) {
            return darkThemeName;
        }

        var lightQuery = window.matchMedia('(prefers-color-scheme: light)');
        lightQuery.addListener(function (e) {
            const newThemeName = e.matches ? lightThemeName : darkThemeName;
            znaiTheme.setExplicitly(newThemeName);
        });

        return lightQuery.matches ? lightThemeName : darkThemeName;
    }
})()</script>
<div id="znai"><div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>ConfigLoggingBundle</h1></header>
<p>The ConfigLoggingBundle logs the Dropwizard configuration to slf4j at INFO level, by serializing the in-memory configuration object to json. It does not echo the contents of the configuration file back. The output will contain default values that were not specified in the original configuration file. Some other values will be normalized or pretty printed.To turn it on, add ConfigLoggingBundle to the list of registered bundles. @Override public void initialize(Bootstrap&lt;HelloWorldConfiguration&gt; bootstrap) { bootstrap.setConfigurationFactoryFactory(new JsonConfigurationFactoryFactory&lt;&gt;()); bootstrap.addBundle(new EnvironmentConfigBundle()); bootstrap.addBundle(new ObjectMapperBundle()); bootstrap.addBundle(new ConfigLoggingBundle()); bootstrap.addBundle(new JerseyHttpLoggingBundle()); bootstrap.addBundle(new ClockBundle()); bootstrap.addBundle(new UUIDBundle()); bootstrap.addBundle(new H2Bundle()); bootstrap.addBundle(new NamedDataSourceBundle()); bootstrap.addBundle(new ConnectionManagerBundle()); bootstrap.addBundle(new ConnectionManagerHolderBundle()); bootstrap.addBundle(new ReladomoBundle()); bootstrap.addCommand(new RenderCommand()); bootstrap.addBundle(new AssetsBundle()); bootstrap.addBundle(new MigrationsBundle&lt;HelloWorldConfiguration&gt;() { @Override public DataSourceFactory getDataSourceFactory(HelloWorldConfiguration configuration) { return Iterate.getOnly(configuration.getNamedDataSourceFactories()); } }); bootstrap.addBundle(new ViewBundle&lt;HelloWorldConfiguration&gt;() { @Override public Map&lt;String, Map&lt;String, String&gt;&gt; getViewConfiguration(HelloWorldConfiguration configuration) { return configuration.getViewRendererConfiguration(); } }); } Now HelloWorldApplication will log something like this on startup: INFO 12:53:29 [main] {liftwizard.priority=-8, liftwizard.bundle=ConfigLoggingBundle} io.liftwizard.dropwizard.bundle.config.logging.ConfigLoggingBundle: Inferred Dropwizard configuration: json5 { &quot;template&quot;: &quot;Hello, %s!&quot;, &quot;defaultName&quot;: &quot;Stranger&quot;, &quot;configLoggingFactory&quot;: { &quot;enabled&quot;: true }, // ... &quot;metrics&quot;: { &quot;frequency&quot;: &quot;1 minute&quot;, &quot;reporters&quot;: [ ] } } Note that the metrics section at the end was not specified in test-example.json5 . It comes from serializing the output of io.dropwizard.Configuration.getMetricsFactory() .This output can be helpful for fleshing out the configuration file with default options to make it easier to edit. For example, it's much easier to flip a boolean flag from false to true than to first figure out where in the configuration file it belongs and the exact spelling of its key. @JsonProperty(&quot;metrics&quot;) public MetricsFactory getMetricsFactory() { return metrics; } The ConfigLoggingBundle also logs the &quot;default&quot; configuration at the DEBUG level. It does this by instantiating a new copy of the configuration class using the default no-arg constructor, serializing it to json, and logging it. The default configuration output can be useful for finding redundant configuration to remove.</p>
</article>
</section>
</div>
<script type="text/javascript" src="/docs/toc.js"></script>
<script type="text/javascript" src="/docs/assets.js"></script>
<script type="text/javascript" src="/docs/static/main.js"></script>
<script type="text/javascript" src="/docs/search-index.js"></script>
<script>
document.getElementById('znai').innerHTML = '';
ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/motlin/liftwizard/blob/master/docs/src/main/znai",
      "title" : "View On GitHub"
    },
    "id" : "docs",
    "title" : "Liftwizard",
    "type" : "Guide",
    "previewEnabled" : false
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "title" : "ConfigLoggingBundle",
      "id" : "configloggingbundle",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "The ",
          "type" : "SimpleText"
        }, {
          "code" : "ConfigLoggingBundle",
          "type" : "InlinedCode"
        }, {
          "text" : " logs the Dropwizard configuration to slf4j at INFO level, by serializing the in-memory configuration object to json. It does not echo the contents of the configuration file back. The output will contain default values that were not specified in the original configuration file. Some other values will be normalized or pretty printed.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To turn it on, add ",
          "type" : "SimpleText"
        }, {
          "code" : "ConfigLoggingBundle",
          "type" : "InlinedCode"
        }, {
          "text" : " to the list of registered bundles.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "java",
        "snippet" : "@Override\npublic void initialize(Bootstrap<HelloWorldConfiguration> bootstrap) {\n    bootstrap.setConfigurationFactoryFactory(new JsonConfigurationFactoryFactory<>());\n    bootstrap.addBundle(new EnvironmentConfigBundle());\n\n    bootstrap.addBundle(new ObjectMapperBundle());\n    bootstrap.addBundle(new ConfigLoggingBundle());\n\n    bootstrap.addBundle(new JerseyHttpLoggingBundle());\n\n    bootstrap.addBundle(new ClockBundle());\n    bootstrap.addBundle(new UUIDBundle());\n\n    bootstrap.addBundle(new H2Bundle());\n    bootstrap.addBundle(new NamedDataSourceBundle());\n    bootstrap.addBundle(new ConnectionManagerBundle());\n    bootstrap.addBundle(new ConnectionManagerHolderBundle());\n    bootstrap.addBundle(new ReladomoBundle());\n\n    bootstrap.addCommand(new RenderCommand());\n    bootstrap.addBundle(new AssetsBundle());\n    bootstrap.addBundle(new MigrationsBundle<HelloWorldConfiguration>() {\n        @Override\n        public DataSourceFactory getDataSourceFactory(HelloWorldConfiguration configuration) {\n            return Iterate.getOnly(configuration.getNamedDataSourceFactories());\n        }\n    });\n    bootstrap.addBundle(new ViewBundle<HelloWorldConfiguration>() {\n        @Override\n        public Map<String, Map<String, String>> getViewConfiguration(HelloWorldConfiguration configuration) {\n            return configuration.getViewRendererConfiguration();\n        }\n    });\n}",
        "entry" : "initialize",
        "readMore" : true,
        "readMoreLines" : 8,
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Now ",
          "type" : "SimpleText"
        }, {
          "code" : "HelloWorldApplication",
          "type" : "InlinedCode"
        }, {
          "text" : " will log something like this on startup:",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "",
        "snippet" : "INFO  12:53:29 [main]  {liftwizard.priority=-8, liftwizard.bundle=ConfigLoggingBundle} io.liftwizard.dropwizard.bundle.config.logging.ConfigLoggingBundle: Inferred Dropwizard configuration:\n\n",
        "lineNumber" : "",
        "type" : "Snippet"
      }, {
        "lang" : "json5",
        "snippet" : "{\n  \"template\": \"Hello, %s!\",\n  \"defaultName\": \"Stranger\",\n  \"configLoggingFactory\": {\n    \"enabled\": true\n  },\n  // ...\n  \"metrics\": {\n    \"frequency\": \"1 minute\",\n    \"reporters\": [ ]\n  }\n}\n",
        "lineNumber" : "",
        "title" : "Output configuration",
        "type" : "Snippet"
      }, {
        "title" : "Original configuration",
        "collapsedPaths" : [ "root.database", "root.server", "root.logging" ],
        "data" : {
          "template" : "Hello, %s!",
          "defaultName" : "Stranger",
          "clock" : {
            "type" : "incrementing"
          },
          "uuid" : {
            "type" : "seed",
            "seed" : "example seed"
          },
          "server" : {
            "detailedJsonProcessingExceptionMapper" : true,
            "applicationConnectors" : [ {
              "type" : "http",
              "port" : 0
            } ],
            "adminConnectors" : [ {
              "type" : "http",
              "port" : 0
            } ]
          },
          "logging" : {
            "level" : "INFO",
            "appenders" : [ {
              "type" : "buffered",
              "timeZone" : "system",
              "logFormat" : "%highlight(%-5level) %cyan(%date{HH:mm:ss}) [%white(%thread)] %blue(%marker) {%magenta(%mdc)} %green(%logger): %message%n%red(%rootException)",
              "includeCallerData" : true
            }, {
              "type" : "file",
              "currentLogFilename" : "./logs/application.log",
              "archivedLogFilenamePattern" : "./logs/application-%d-%i.log.gz",
              "archive" : true,
              "archivedFileCount" : 7,
              "maxFileSize" : "1mb"
            }, {
              "type" : "logstash-file",
              "currentLogFilename" : "./logs/logstash.json",
              "archivedLogFilenamePattern" : "./logs/logstash-%d.json",
              "includeCallerData" : true
            } ]
          },
          "configLogging" : {
            "enabled" : true
          },
          "h2" : {
            "enabled" : true,
            "webPort" : 8083,
            "tcpPort" : 9093
          },
          "dataSources" : [ {
            "name" : "liquibase",
            "driverClass" : "com.p6spy.engine.spy.P6SpyDriver",
            "readOnlyByDefault" : false,
            "user" : "sa",
            "password" : "",
            "url" : "jdbc:p6spy:h2:tcp://localhost:9093/liftwizard-app-h2",
            "properties" : {
              "charSet" : "UTF-8"
            },
            "logValidationErrors" : true,
            "maxWaitForConnection" : "1 second"
          } ],
          "connectionManagers" : [ {
            "connectionManagerName" : "liquibase",
            "dataSourceName" : "liquibase",
            "databaseType" : "H2",
            "schemaName" : "liftwizard-app-h2"
          } ],
          "reladomo" : {
            "runtimeConfigurationPaths" : [ "reladomo-runtime-configuration/ReladomoRuntimeConfiguration.xml" ]
          }
        },
        "paths" : [ ],
        "type" : "Json"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Note that the ",
          "type" : "SimpleText"
        }, {
          "code" : "metrics",
          "type" : "InlinedCode"
        }, {
          "text" : " section at the end was not specified in ",
          "type" : "SimpleText"
        }, {
          "code" : "test-example.json5",
          "type" : "InlinedCode"
        }, {
          "text" : ". It comes from serializing the output of ",
          "type" : "SimpleText"
        }, {
          "code" : "io.dropwizard.Configuration.getMetricsFactory()",
          "type" : "InlinedCode"
        }, {
          "text" : ".",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "This output can be helpful for fleshing out the configuration file with default options to make it easier to edit. For example, it's much easier to flip a boolean flag from ",
          "type" : "SimpleText"
        }, {
          "code" : "false",
          "type" : "InlinedCode"
        }, {
          "text" : " to ",
          "type" : "SimpleText"
        }, {
          "code" : "true",
          "type" : "InlinedCode"
        }, {
          "text" : " than to first figure out where in the configuration file it belongs and the exact spelling of its key.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "java",
        "snippet" : "@JsonProperty(\"metrics\")\npublic MetricsFactory getMetricsFactory() {\n    return metrics;\n}",
        "title" : "io.dropwizard.Configuration",
        "entry" : "getMetricsFactory",
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "The ",
          "type" : "SimpleText"
        }, {
          "code" : "ConfigLoggingBundle",
          "type" : "InlinedCode"
        }, {
          "text" : " also logs the \"default\" configuration at the ",
          "type" : "SimpleText"
        }, {
          "code" : "DEBUG",
          "type" : "InlinedCode"
        }, {
          "text" : " level. It does this by instantiating a new copy of the configuration class using the default no-arg constructor, serializing it to json, and logging it. The default configuration output can be useful for finding redundant configuration to remove.",
          "type" : "SimpleText"
        } ]
      } ]
    } ],
    "lastModifiedTime" : 1600108188504,
    "tocItem" : {
      "sectionTitle" : "Configuration",
      "pageTitle" : "ConfigLoggingBundle",
      "pageMeta" : { },
      "dirName" : "configuration",
      "fileName" : "ConfigLoggingBundle",
      "viewOnRelativePath" : null,
      "pageSectionIdTitles" : [ {
        "title" : "ConfigLoggingBundle",
        "id" : "configloggingbundle"
      } ]
    }
  },
  "footer" : { }
}), document.getElementById("znai"));
</script>

</body>
</html>
